(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i,a,u,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._link=n,this._likes=r,this._cardSelector=o,this._handleCardClick=i,this._ownerId=a,this._handleLikeCard=u,this._handleDeleteCard=c}var n,r;return n=t,r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(e){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".element__image"),this._like=this._element.querySelector(".button_variant_like"),this._delete=this._element.querySelector(".button_variant_delete"),this._ownerId!==e&&this._delete.remove(),this._setEventListeners(),this._element.querySelector(".element__town").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._likeCount=this._element.querySelector(".element__like-count"),this.setLikesCount(this._likes),this._element}},{key:"_deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"likeCard",value:function(){this._like.classList.add("button_variant_active-like")}},{key:"deleteLikeCard",value:function(){this._like.classList.remove("button_variant_active-like")}},{key:"isLiked",value:function(){return this._like.classList.contains("button_variant_active-like")}},{key:"isLikedByMe",value:function(e){var t=this;return e.some((function(e){return e._id===t._ownerId}))}},{key:"setLikesCount",value:function(e){this._likeCount.textContent=e}},{key:"_setEventListeners",value:function(){var e=this;this._like.addEventListener("click",(function(){return e._handleLikeCard()})),this._delete.addEventListener("click",(function(){return e._handleDeleteCard()})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}}],r&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validationSettings=t,this._formElement=n,this._buttonElement=this._formElement.querySelector(this._validationSettings.popupSubmit),this._inputList=Array.from(this._formElement.querySelectorAll("".concat(this._validationSettings.popupInput)))}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this;this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._validationSettings.inputError),t.classList.add(this._validationSettings.inputErrorActive),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._validationSettings.inputError),t.classList.remove(this._validationSettings.inputErrorActive),t.textContent=""}},{key:"_toggleButtonState",value:function(){var e=this._formElement.checkValidity();this._buttonElement.classList.toggle(this._validationSettings.buttonInactive,!e),this._buttonElement.disabled=!e}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()})),this._popup.querySelector(".popup__close-button").addEventListener("click",this.close.bind(this))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=l(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},c.apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function f(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e))._imgUrl=t,r._imgName=n,r}return t=a,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;this._imgUrl.src=t,this._imgUrl.alt=n,this._imgName.textContent=n,c(p(a.prototype),"open",this).call(this)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._buttonSave=n._popup.querySelector(".popup__save-button"),n._textSaveButton=n._buttonSave.textContent,n._handleFormSubmit=t,n._inputList=Array.from(n._popup.querySelectorAll(".popup__input")),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())})),_(k(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){var e=this._popup.querySelector(".popup__form");_(k(a.prototype),"close",this).call(this),e.reset()}},{key:"loading",value:function(e){this._buttonSave.textContent=e?"Сохранение...":this._textSaveButton}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t){var n=t.nameUserSelector,r=t.workUserSelector,o=t.avatarUserSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameUser=document.querySelector(n),this._workUser=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{nameUser:this._nameUser.textContent,workUser:this._workUser.textContent}}},{key:"setUserInfo",value:function(e){this._nameUser.textContent=e.nameUser,this._workUser.textContent=e.workUser}},{key:"setUserAvatar",value:function(e){this._avatar.src=e.avatar}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))},j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return fetch(this._url+"/users/me",{method:"GET",headers:this._headers}).then(L)}},{key:"getInitialCards",value:function(){return fetch(this._url+"/cards",{method:"GET",headers:this._headers}).then(L)}},{key:"saveUserInfo",value:function(e){return fetch(this._url+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.nameUser,about:e.workUser})}).then(L)}},{key:"addCard",value:function(e){return fetch(this._url+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(L)}},{key:"deleteCard",value:function(e){return fetch(this._url+"/cards/".concat(e),{method:"DELETE",headers:this._headers}).then(L)}},{key:"likeCard",value:function(e){return fetch(this._url+"/cards/".concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(L)}},{key:"deleteLikeCard",value:function(e){return fetch(this._url+"/cards/".concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(L)}},{key:"editAvatar",value:function(e){return fetch(this._url+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(L)}},{key:"getUserInfoAndInitialCards",value:function(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=q(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},U.apply(this,arguments)}function q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function T(e,t){return T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T(e,t)}function R(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var x,D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._buttonConfirmDeleteCard=t._popup.querySelector(".popup__save-button"),t._functionDeleteCard=null,t}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;U(A(a.prototype),"setEventListeners",this).call(this),this._buttonConfirmDeleteCard.addEventListener("click",(function(){e._functionDeleteCard()}))}},{key:"open",value:function(e){U(A(a.prototype),"open",this).call(this),this._functionDeleteCard=e}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i),B={inputError:"popup__input_type_error",inputErrorActive:"popup__input-error_active",buttonInactive:"button_variant_inactive",popupInput:".popup__input",popupSubmit:".popup__submit",popupForm:".popup__form"},V=document.querySelector(".popup_add").querySelector(".popup__form"),N=document.querySelector(".popup_edit"),M=N.querySelector(".popup__form"),F=document.querySelector(".button_variant_add"),J=document.querySelector(".button_variant_edit"),G=N.querySelector(".popup__input_name-user"),H=N.querySelector(".popup__input_work-user"),z=document.querySelector(".popup__img"),$=document.querySelector(".popup__img-info"),K=document.querySelector(".button_variant_avatar"),Q=document.querySelector(".popup_edit-avatar").querySelector(".popup__form");function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=new j({url:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"d88185d7-a57f-426c-977a-fbfd58d99413","Content-Type":"application/json"}});function Y(e,n,r,o,i){var a=new t(e,n,r.length,"#template",(function(){return te.open({name:e,link:n})}),o,(function(){a.isLiked()?X.deleteLikeCard(i).then((function(e){a.deleteLikeCard(),a.setLikesCount(e.likes.length)})).catch((function(e){return console.log(e)})):X.likeCard(i).then((function(e){a.likeCard(),a.setLikesCount(e.likes.length)})).catch((function(e){return console.log(e)}))}),(function(){re.open((function(){X.deleteCard(i).then((function(){a._deleteCard(),re.close()})).catch((function(e){return console.log(e)}))}))})),u=a.generateCard(x);return a.isLikedByMe(r)&&X.likeCard(i).then((function(){a.likeCard()})).catch((function(e){return console.log(e)})),u}var Z=new C({nameUserSelector:".profile__title",workUserSelector:".profile__subtitle",avatarUserSelector:".profile__avatar"}),ee=new S({renderer:function(e){var t=Y(e.name,e.link,e.likes,e.owner._id,e._id);ee.addItem(t)}},".elements");X.getUserInfoAndInitialCards().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1],a={nameUser:i.name,workUser:i.about,avatar:i.avatar,_id:i._id,cohort:i.cohort};Z.setUserInfo(a),x=i._id,Z.setUserAvatar(a),ee.renderItems(o)})).catch((function(e){return console.log(e)}));var te=new h(".popup_view-card",z,$);te.setEventListeners();var ne=new g(".popup_add",(function(e){ne.loading(!0),X.addCard(e).then((function(e){var t=Y(e.name,e.link,e.likes,e.owner._id,e._id);ee.addItem(t),ne.close()})).catch((function(e){return console.log(e)})).finally((function(){ne.loading(!1)}))}));ne.setEventListeners(),F.addEventListener("click",(function(){ae.resetValidation(),ne.open()}));var re=new D(".popup_delete-card");re.setEventListeners();var oe=new g(".popup_edit",(function(e){oe.loading(!0),X.saveUserInfo(e).then((function(){Z.setUserInfo(e),oe.close()})).catch((function(e){return console.log(e)})).finally((function(){oe.loading(!1)}))}));oe.setEventListeners(),J.addEventListener("click",(function(){var e=Z.getUserInfo();G.value=e.nameUser,H.value=e.workUser,ue.resetValidation(),oe.open()}));var ie=new g(".popup_edit-avatar",(function(e){ie.loading(!0),X.editAvatar(e).then((function(){Z.setUserAvatar(e),ie.close()})).catch((function(e){return console.log(e)})).finally((function(){ie.loading(!1)}))}));ie.setEventListeners(),K.addEventListener("click",(function(){ce.resetValidation(),ie.open()}));var ae=new r(B,V),ue=new r(B,M),ce=new r(B,Q);ue.enableValidation(),ae.enableValidation(),ce.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxNQUFLLFdBQ0o2QyxFQUFTUSxZQUFZN0YsR0FDckJ1RyxHQUFxQnBILFdBRXRCdUYsT0FBTSxTQUFBQyxHQUFHLE9BQUlDLFFBQVFDLElBQUlGLE1BQ3pCeUIsU0FBUSxXQUNQRyxHQUFxQkwsU0FBUSxTQUluQ0ssR0FBcUJQLG9CQUVyQnBDLEVBQTJCakgsaUJBQWlCLFNBQVMsV0FDbkQsSUFBTTZFLEVBQVc2RCxFQUFTcEMsY0FDMUJZLEVBQWM1RCxNQUFRdUIsRUFBU0YsU0FDL0J3QyxFQUFjN0QsTUFBUXVCLEVBQVNELFNBQy9Ca0YsR0FBcUJILGtCQUNyQkMsR0FBcUJoQyxVQUl2QixJQUFNbUMsR0FBa0IsSUFBSS9HLEVFOUdJLHNCRjhHbUMsU0FBQ2dILEdBQ2xFRCxHQUFnQlIsU0FBUSxHQUN4QmpDLEVBQUkyQyxXQUFXRCxHQUNabkUsTUFBSyxXQUNKNkMsRUFBU1MsY0FBY2EsR0FDdkJELEdBQWdCdkgsV0FFakJ1RixPQUFNLFNBQUFDLEdBQUcsT0FBSUMsUUFBUUMsSUFBSUYsTUFDekJ5QixTQUFRLFdBQ1BNLEdBQWdCUixTQUFRLFNBSTlCUSxHQUFnQlYsb0JBRWhCakMsRUFBaUJwSCxpQkFBaUIsU0FBUyxXQUN6Q2tLLEdBQW9CUCxrQkFDcEJJLEdBQWdCbkMsVUFJbEIsSUFBTThCLEdBQW9CLElBQUl6SixFQUFjMEcsRUFBVUUsR0FDaERpRCxHQUF1QixJQUFJN0osRUFBYzBHLEVBQVVJLEdBQ25EbUQsR0FBc0IsSUFBSWpLLEVBQWMwRyxFQUFVVSxHQUV4RHlDLEdBQXFCSyxtQkFDckJULEdBQWtCUyxtQkFDbEJELEdBQW9CQyxvQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBsaW5rLCBsaWtlcywgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2ssIG93bmVySWQsIGhhbmRsZUxpa2VDYXJkLCBoYW5kbGVEZWxldGVDYXJkKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX293bmVySWQgPSBvd25lcklkO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkID0gaGFuZGxlTGlrZUNhcmQ7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIHRlbXBsYXRlO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKHVzZXJJZCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJyk7XG4gICAgdGhpcy5fbGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl92YXJpYW50X2xpa2UnKTtcbiAgICB0aGlzLl9kZWxldGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fdmFyaWFudF9kZWxldGUnKTtcbiAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdXNlcklkKSB7XG4gICAgICB0aGlzLl9kZWxldGUucmVtb3ZlKCk7XG4gICAgfVxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190b3duJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fbGlrZUNvdW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1jb3VudCcpO1xuICAgIHRoaXMuc2V0TGlrZXNDb3VudCh0aGlzLl9saWtlcyk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF9kZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBsaWtlQ2FyZCgpIHtcbiAgICB0aGlzLl9saWtlLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbl92YXJpYW50X2FjdGl2ZS1saWtlJyk7XG4gIH1cblxuICBkZWxldGVMaWtlQ2FyZCgpIHtcbiAgICB0aGlzLl9saWtlLmNsYXNzTGlzdC5yZW1vdmUoJ2J1dHRvbl92YXJpYW50X2FjdGl2ZS1saWtlJyk7XG4gIH1cblxuICBpc0xpa2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9saWtlLmNsYXNzTGlzdC5jb250YWlucygnYnV0dG9uX3ZhcmlhbnRfYWN0aXZlLWxpa2UnKTtcbiAgfVxuXG4gIGlzTGlrZWRCeU1lKGxpa2VzQXJyKSB7XG4gICAgcmV0dXJuIGxpa2VzQXJyLnNvbWUobGlrZSA9PiB7XG4gICAgICByZXR1cm4gbGlrZS5faWQgPT09IHRoaXMuX293bmVySWQ7XG4gICAgfSlcbiAgfVxuXG4gIHNldExpa2VzQ291bnQobGlrZXNDb3VudCkge1xuICAgIHRoaXMuX2xpa2VDb3VudC50ZXh0Q29udGVudCA9IGxpa2VzQ291bnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VDYXJkKCkpO1xuXG4gICAgdGhpcy5fZGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvblNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncyA9IHZhbGlkYXRpb25TZXR0aW5ncztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5wb3B1cFN1Ym1pdCk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGAke3RoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5wb3B1cElucHV0fWApKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KVxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRFcnJvcik7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmlucHV0RXJyb3JBY3RpdmUpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmlucHV0RXJyb3IpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5pbnB1dEVycm9yQWN0aXZlKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBjb25zdCBpc0Zvcm1WYWxpZCA9IHRoaXMuX2Zvcm1FbGVtZW50LmNoZWNrVmFsaWRpdHkoKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC50b2dnbGUodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmJ1dHRvbkluYWN0aXZlLCAhaXNGb3JtVmFsaWQpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSAhaXNGb3JtVmFsaWQ7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuX3BvcHVwXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG4gIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGltZ1VybCwgaW1nTmFtZSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltZ1VybCA9IGltZ1VybDtcbiAgICB0aGlzLl9pbWdOYW1lID0gaW1nTmFtZTtcbiAgfVxuXG4gIG9wZW4oe2xpbmssIG5hbWV9KSB7XG4gICAgdGhpcy5faW1nVXJsLnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1nVXJsLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5faW1nTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG5cbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uU2F2ZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idXR0b24nKTtcbiAgICB0aGlzLl90ZXh0U2F2ZUJ1dHRvbiA9IHRoaXMuX2J1dHRvblNhdmUudGV4dENvbnRlbnQ7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBmb3JtVmFsdWVzW2lucHV0RWxlbWVudC5uYW1lXSA9IGlucHV0RWxlbWVudC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgY29uc3QgZm9ybUlucHV0cyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgZm9ybUlucHV0cy5yZXNldCgpO1xuICB9XG5cbiAgbG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9idXR0b25TYXZlLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25TYXZlLnRleHRDb250ZW50ID0gdGhpcy5fdGV4dFNhdmVCdXR0b247XG4gICAgfVxuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtyZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMocmVzKSB7XG4gICAgcmVzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pXG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHtuYW1lVXNlclNlbGVjdG9yLCB3b3JrVXNlclNlbGVjdG9yLCBhdmF0YXJVc2VyU2VsZWN0b3J9KSB7XG4gICAgdGhpcy5fbmFtZVVzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVVc2VyU2VsZWN0b3IpO1xuICAgIHRoaXMuX3dvcmtVc2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih3b3JrVXNlclNlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclVzZXJTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCBpbmZvID0ge1xuICAgICAgbmFtZVVzZXI6IHRoaXMuX25hbWVVc2VyLnRleHRDb250ZW50LFxuICAgICAgd29ya1VzZXI6IHRoaXMuX3dvcmtVc2VyLnRleHRDb250ZW50LFxuICAgIH07XG4gICAgcmV0dXJuIGluZm87XG4gIH1cblxuICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xuICAgIHRoaXMuX25hbWVVc2VyLnRleHRDb250ZW50ID0gdXNlckRhdGEubmFtZVVzZXI7XG4gICAgdGhpcy5fd29ya1VzZXIudGV4dENvbnRlbnQgPSB1c2VyRGF0YS53b3JrVXNlcjtcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIodXNlckRhdGEpIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gdXNlckRhdGEuYXZhdGFyO1xuICB9XG59IiwiY29uc3QgZXJyb3IgPSByZXMgPT4ge1xuICBpZiAocmVzLm9rKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gIH1cbiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX3VybCA9IG9wdGlvbnMudXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGVycm9yKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgJy9jYXJkcycsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGVycm9yKTtcbiAgfVxuXG4gIHNhdmVVc2VySW5mbyh1c2VyRGF0YSkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyAnL3VzZXJzL21lJywge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZVVzZXIsXG4gICAgICAgIGFib3V0OiB1c2VyRGF0YS53b3JrVXNlclxuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4oZXJyb3IpO1xuICB9XG5cbiAgYWRkQ2FyZChkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArICcvY2FyZHMnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgIH0pXG4gICAgICAudGhlbihlcnJvcik7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyBgL2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGVycm9yKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyBgL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGVycm9yKTtcbiAgfVxuXG4gIGRlbGV0ZUxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyBgL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGVycm9yKTtcbiAgfVxuXG4gIGVkaXRBdmF0YXIodXNlckRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgJy91c2Vycy9tZS9hdmF0YXInLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IHVzZXJEYXRhLmF2YXRhclxuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4oZXJyb3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm9BbmRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKVxuICB9XG59OyIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcbmltcG9ydCB7c2V0dGluZ3MsIGZvcm1Qb3B1cEFkZENhcmQsIG9wZW5Qb3B1cEFkZENhcmRCdXR0b24sIGVsZW1lbnRzLCBmb3JtUG9wdXBFZGl0LCBvcGVuUG9wdXBFZGl0UHJvZmlsZUJ1dHRvbiwgbmFtZVVzZXJJbnB1dCwgd29ya1VzZXJJbnB1dCxcbiAgc2VsZWN0b3JQb3B1cFZpZXdDYXJkLCBzZWxlY3RvclBvcHVwQWRkQ2FyZCwgc2VsZWN0b3JQb3B1cEVkaXRQcm9maWxlLCBpbWdVcmwsIGltZ05hbWUsIHNlbGVjdG9yUG9wdXBEZWxldGVDYXJkLCBidXR0b25FZGl0QXZhdGFyLFxuICBzZWxlY3RvclBvcHVwRWRpdEF2YXRhciwgZm9ybVBvcHVwQXZhdGFyfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmxldCB1c2VySWQ7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICB1cmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQxJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICdkODgxODVkNy1hNTdmLTQyNmMtOTc3YS1mYmZkNThkOTk0MTMnLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKG5hbWUsIGxpbmssIGxpa2VzLCBvd25lcklkLCBjYXJkSWQpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIG5hbWUsXG4gICAgbGluayxcbiAgICBsaWtlcy5sZW5ndGgsXG4gICAgJyN0ZW1wbGF0ZScsXG4gICAgKCkgPT4gaW1nUG9wdXAub3Blbih7bmFtZSwgbGlua30pLFxuICAgIG93bmVySWQsXG4gICAgKCkgPT4ge1xuICAgICAgaWYgKCFjYXJkLmlzTGlrZWQoKSkge1xuICAgICAgICBhcGkubGlrZUNhcmQoY2FyZElkKVxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIGNhcmQubGlrZUNhcmQoKTtcbiAgICAgICAgICAgIGNhcmQuc2V0TGlrZXNDb3VudChyZXMubGlrZXMubGVuZ3RoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcGkuZGVsZXRlTGlrZUNhcmQoY2FyZElkKVxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIGNhcmQuZGVsZXRlTGlrZUNhcmQoKTtcbiAgICAgICAgICAgIGNhcmQuc2V0TGlrZXNDb3VudChyZXMubGlrZXMubGVuZ3RoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAoKSA9PiB7XG4gICAgICBwb3B1cERlbGV0ZUNhcmQub3BlbigoKSA9PiB7XG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjYXJkLl9kZWxldGVDYXJkKCk7XG4gICAgICAgICAgICBwb3B1cERlbGV0ZUNhcmQuY2xvc2UoKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgKTtcblxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKHVzZXJJZCk7XG5cbiAgaWYgKGNhcmQuaXNMaWtlZEJ5TWUobGlrZXMpKSB7XG4gICAgYXBpLmxpa2VDYXJkKGNhcmRJZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC5saWtlQ2FyZCgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIH1cblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PSDQv9C+0LvRg9GH0LDQtdC8INGBINGB0LXRgNCy0LXRgNCwINC00LDQvdC90YvQtSDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0Lgg0LTQvtCx0LDQstC70Y/QtdC8INC40YUg0L3QsCDRgdCw0LnRgiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lVXNlclNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICB3b3JrVXNlclNlbGVjdG9yOiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxuICBhdmF0YXJVc2VyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2F2YXRhclwiXG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PSDQv9C+0LvRg9GH0LDQtdC8INC60LDRgNGC0L7Rh9C60Lgg0YEg0YHQtdGA0LLQtdGA0LAg0Lgg0LTQvtCx0LDQstC70Y/QtdC8INC90LAg0YHRgtGAID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoaXRlbS5uYW1lLCBpdGVtLmxpbmssIGl0ZW0ubGlrZXMsIGl0ZW0ub3duZXIuX2lkLCBpdGVtLl9pZCk7XG4gICAgY2FyZExpc3QuYWRkSXRlbShjYXJkKTtcbiAgfVxufSwgZWxlbWVudHMpO1xuXG5hcGkuZ2V0VXNlckluZm9BbmRJbml0aWFsQ2FyZHMoKVxuICAudGhlbigoW2NhcmRzLCB1c2VyRGF0YV0pID0+IHtcbiAgICBjb25zdCB1c2VyID0ge1xuICAgICAgbmFtZVVzZXI6IHVzZXJEYXRhLm5hbWUsXG4gICAgICB3b3JrVXNlcjogdXNlckRhdGEuYWJvdXQsXG4gICAgICBhdmF0YXI6IHVzZXJEYXRhLmF2YXRhcixcbiAgICAgIF9pZDogdXNlckRhdGEuX2lkLFxuICAgICAgY29ob3J0OiB1c2VyRGF0YS5jb2hvcnRcbiAgICB9XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlcik7XG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIodXNlcik7XG5cblxuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGNhcmRzKTtcbiAgfSlcbiAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09INC+0YLQutGA0YvRgtC40LUg0Lgg0LfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0YEg0LrQsNGA0YLQvtGH0LrQvtC5ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCBpbWdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvclBvcHVwVmlld0NhcmQsIGltZ1VybCwgaW1nTmFtZSk7XG5cbmltZ1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PSBwb3B1cCBhZGQgY2FyZCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY29uc3QgcG9wdXBXaXRoQWRkQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvclBvcHVwQWRkQ2FyZCwgKGZvcm1WYWx1ZXMpID0+IHtcbiAgcG9wdXBXaXRoQWRkQ2FyZEZvcm0ubG9hZGluZyh0cnVlKTtcbiAgYXBpLmFkZENhcmQoZm9ybVZhbHVlcylcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChyZXMubmFtZSwgcmVzLmxpbmssIHJlcy5saWtlcywgcmVzLm93bmVyLl9pZCwgcmVzLl9pZCk7XG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQpO1xuICAgICAgcG9wdXBXaXRoQWRkQ2FyZEZvcm0uY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cFdpdGhBZGRDYXJkRm9ybS5sb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn0pO1xuXG5wb3B1cFdpdGhBZGRDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5vcGVuUG9wdXBBZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICB2YWxpZGF0b3JDYXJkRm9ybS5yZXNldFZhbGlkYXRpb24oKTtcbiAgcG9wdXBXaXRoQWRkQ2FyZEZvcm0ub3BlbigpO1xufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09IHBvcHVwIGRlbGV0ZSBjYXJkID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCBwb3B1cERlbGV0ZUNhcmQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybShzZWxlY3RvclBvcHVwRGVsZXRlQ2FyZCk7XG5wb3B1cERlbGV0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT0gcG9wdXAgZWRpdCBwcm9maWxlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCBwb3B1cEVkaXRQcm9maWxlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9yUG9wdXBFZGl0UHJvZmlsZSwgKGZvcm1WYWx1ZXMpID0+IHtcbiAgcG9wdXBFZGl0UHJvZmlsZUZvcm0ubG9hZGluZyh0cnVlKTtcbiAgYXBpLnNhdmVVc2VySW5mbyhmb3JtVmFsdWVzKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGZvcm1WYWx1ZXMpO1xuICAgICAgcG9wdXBFZGl0UHJvZmlsZUZvcm0uY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cEVkaXRQcm9maWxlRm9ybS5sb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn0pO1xuXG5wb3B1cEVkaXRQcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5vcGVuUG9wdXBFZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lVXNlcklucHV0LnZhbHVlID0gdXNlckRhdGEubmFtZVVzZXI7XG4gIHdvcmtVc2VySW5wdXQudmFsdWUgPSB1c2VyRGF0YS53b3JrVXNlcjtcbiAgdmFsaWRhdG9yUHJvZmlsZUZvcm0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHBvcHVwRWRpdFByb2ZpbGVGb3JtLm9wZW4oKTtcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PSBwb3B1cCBlZGl0IHByb2ZpbGUgYXZhdGFyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvclBvcHVwRWRpdEF2YXRhciwgKGZvcm1WYWx1ZSkgPT4ge1xuICBwb3B1cEVkaXRBdmF0YXIubG9hZGluZyh0cnVlKTtcbiAgYXBpLmVkaXRBdmF0YXIoZm9ybVZhbHVlKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoZm9ybVZhbHVlKTtcbiAgICAgIHBvcHVwRWRpdEF2YXRhci5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwRWRpdEF2YXRhci5sb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn0pO1xuXG5wb3B1cEVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYnV0dG9uRWRpdEF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgdmFsaWRhdG9yQXZhdGFyRm9ybS5yZXNldFZhbGlkYXRpb24oKTtcbiAgcG9wdXBFZGl0QXZhdGFyLm9wZW4oKTtcbn0pXG5cbi8vID09PT09PT09PT09PT09PSDRjdC60LfQtdC80L/Qu9GP0YDRiyDQutC70LDRgdGB0LAgRm9ybVZhbGlkYXRvciDQuCDQstCw0LvQuNC00LDRhtC40Y8g0YTQvtGA0LwgPT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCB2YWxpZGF0b3JDYXJkRm9ybSA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtUG9wdXBBZGRDYXJkKTtcbmNvbnN0IHZhbGlkYXRvclByb2ZpbGVGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1Qb3B1cEVkaXQpO1xuY29uc3QgdmFsaWRhdG9yQXZhdGFyRm9ybSA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtUG9wdXBBdmF0YXIpO1xuXG52YWxpZGF0b3JQcm9maWxlRm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XG52YWxpZGF0b3JDYXJkRm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XG52YWxpZGF0b3JBdmF0YXJGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9idXR0b25Db25maXJtRGVsZXRlQ2FyZCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idXR0b24nKTtcbiAgICB0aGlzLl9mdW5jdGlvbkRlbGV0ZUNhcmQgPSBudWxsO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9idXR0b25Db25maXJtRGVsZXRlQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2Z1bmN0aW9uRGVsZXRlQ2FyZCgpO1xuICAgIH0pO1xuICB9XG5cbiAgb3BlbihmdW5jdGlvbkRlbGV0ZUNhcmQpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fZnVuY3Rpb25EZWxldGVDYXJkID0gZnVuY3Rpb25EZWxldGVDYXJkO1xuICB9XG59IiwiLy8gY29uc3QgaW5pdGlhbENhcmRzID0gW1xuLy8gICB7XG4vLyAgICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxuLy8gICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbi8vICAgfSxcbi8vICAge1xuLy8gICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbi8vICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4vLyAgIH0sXG4vLyAgIHtcbi8vICAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxuLy8gICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4vLyAgIH0sXG4vLyAgIHtcbi8vICAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXG4vLyAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuLy8gICB9LFxuLy8gICB7XG4vLyAgICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9Jyxcbi8vICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4vLyAgIH0sXG4vLyAgIHtcbi8vICAgICBuYW1lOiAn0JHQsNC50LrQsNC7Jyxcbi8vICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4vLyAgIH1cbi8vIF07XG5cbmNvbnN0IHNldHRpbmdzID0ge1xuICBpbnB1dEVycm9yOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICBpbnB1dEVycm9yQWN0aXZlOiAncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZScsXG4gIGJ1dHRvbkluYWN0aXZlOiAnYnV0dG9uX3ZhcmlhbnRfaW5hY3RpdmUnLFxuICBwb3B1cElucHV0OiAnLnBvcHVwX19pbnB1dCcsXG4gIHBvcHVwU3VibWl0OiAnLnBvcHVwX19zdWJtaXQnLFxuICBwb3B1cEZvcm06ICcucG9wdXBfX2Zvcm0nXG59XG5cbmNvbnN0IHNlbGVjdG9yUG9wdXBWaWV3Q2FyZCA9IFwiLnBvcHVwX3ZpZXctY2FyZFwiO1xuY29uc3QgcG9wdXBBZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2FkZCcpO1xuY29uc3QgZm9ybVBvcHVwQWRkQ2FyZCA9IHBvcHVwQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbmNvbnN0IHNlbGVjdG9yUG9wdXBBZGRDYXJkID0gXCIucG9wdXBfYWRkXCI7XG5jb25zdCBwb3B1cEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX2VkaXRcIik7XG5jb25zdCBmb3JtUG9wdXBFZGl0ID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuY29uc3Qgc2VsZWN0b3JQb3B1cEVkaXRQcm9maWxlID0gXCIucG9wdXBfZWRpdFwiO1xuY29uc3Qgb3BlblBvcHVwQWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3ZhcmlhbnRfYWRkXCIpO1xuY29uc3Qgb3BlblBvcHVwRWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl92YXJpYW50X2VkaXRcIik7XG5jb25zdCBlbGVtZW50cyA9IFwiLmVsZW1lbnRzXCI7XG5jb25zdCBuYW1lVXNlcklucHV0ID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X25hbWUtdXNlclwiKTtcbmNvbnN0IHdvcmtVc2VySW5wdXQgPSBwb3B1cEVkaXQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfd29yay11c2VyXCIpO1xuY29uc3QgaW1nVXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWcnKTtcbmNvbnN0IGltZ05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltZy1pbmZvJyk7XG5jb25zdCBzZWxlY3RvclBvcHVwRGVsZXRlQ2FyZCA9IFwiLnBvcHVwX2RlbGV0ZS1jYXJkXCI7XG5jb25zdCBidXR0b25FZGl0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdmFyaWFudF9hdmF0YXJcIik7XG5jb25zdCBzZWxlY3RvclBvcHVwRWRpdEF2YXRhciA9IFwiLnBvcHVwX2VkaXQtYXZhdGFyXCI7XG5jb25zdCBwb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfZWRpdC1hdmF0YXJcIik7XG5jb25zdCBmb3JtUG9wdXBBdmF0YXIgPSBwb3B1cEF2YXRhci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuLy8gY29uc3QgY2xvc2VQb3B1cEFkZENhcmRCdXR0b24gPSBwb3B1cEFkZENhcmQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpO1xuLy8gY29uc3QgY2xvc2VQb3B1cEVkaXRQcm9maWxlQnV0dG9uID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKTtcbi8vIGNvbnN0IHBvcHVwSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWcnKTtcbi8vIGNvbnN0IHBvcHVwSW1nSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZy1pbmZvXCIpO1xuLy8gY29uc3QgcG9wdXBDbG9zZUJ1dHRvbiA9IHBvcHVwVmlld0NhcmQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcbi8vIGNvbnN0IG5vZGVFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XG4vLyBjb25zdCBwb3B1cEFkZEJ1dHRvbiA9IHBvcHVwQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnV0dG9uJyk7XG4vLyBjb25zdCBuYW1lVXNlckxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbi8vIGNvbnN0IHdvcmtVc2VyTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIpO1xuLy8gY29uc3Qgc2VsZWN0b3JOYW1lVXNlcklucHV0ID0gKFwiLnBvcHVwX19pbnB1dF9uYW1lLXVzZXJcIik7XG4vLyBjb25zdCBzZWxlY3RvcldvcmtVc2VySW5wdXQgPSAoXCIucG9wdXBfX2lucHV0X3dvcmstdXNlclwiKTtcbi8vIGNvbnN0IG5hbWVVc2VyTGFiZWxTZWxlY3RvciA9IChcIi5wcm9maWxlX190aXRsZVwiKTtcbi8vIGNvbnN0IHdvcmtVc2VyTGFiZWxTZWxlY3RvciA9IChcIi5wcm9maWxlX19zdWJ0aXRsZVwiKTtcbi8vIGNvbnN0IHBvcHVwVmlld0NhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3ZpZXctY2FyZFwiKTtcbmV4cG9ydCB7c2V0dGluZ3MsIGZvcm1Qb3B1cEFkZENhcmQsIG9wZW5Qb3B1cEFkZENhcmRCdXR0b24sIGVsZW1lbnRzLCBpbWdVcmwsIGltZ05hbWUsXG4gIGZvcm1Qb3B1cEVkaXQsIG9wZW5Qb3B1cEVkaXRQcm9maWxlQnV0dG9uLCBuYW1lVXNlcklucHV0LFxuICB3b3JrVXNlcklucHV0LCBzZWxlY3RvclBvcHVwVmlld0NhcmQsIHNlbGVjdG9yUG9wdXBBZGRDYXJkLCBzZWxlY3RvclBvcHVwRWRpdFByb2ZpbGUsIHNlbGVjdG9yUG9wdXBEZWxldGVDYXJkLFxuICBidXR0b25FZGl0QXZhdGFyLCBzZWxlY3RvclBvcHVwRWRpdEF2YXRhciwgZm9ybVBvcHVwQXZhdGFyfTsiXSwibmFtZXMiOlsiQ2FyZCIsIm5hbWUiLCJsaW5rIiwibGlrZXMiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJvd25lcklkIiwiaGFuZGxlTGlrZUNhcmQiLCJoYW5kbGVEZWxldGVDYXJkIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfbGlrZXMiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9vd25lcklkIiwiX2hhbmRsZUxpa2VDYXJkIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwidXNlcklkIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZEltYWdlIiwiX2xpa2UiLCJfZGVsZXRlIiwicmVtb3ZlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJfbGlrZUNvdW50Iiwic2V0TGlrZXNDb3VudCIsImNsYXNzTGlzdCIsImFkZCIsImNvbnRhaW5zIiwibGlrZXNBcnIiLCJzb21lIiwibGlrZSIsIl9pZCIsImxpa2VzQ291bnQiLCJhZGRFdmVudExpc3RlbmVyIiwiRm9ybVZhbGlkYXRvciIsInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX3ZhbGlkYXRpb25TZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9idXR0b25FbGVtZW50IiwicG9wdXBTdWJtaXQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInBvcHVwSW5wdXQiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvciIsImlucHV0RXJyb3JBY3RpdmUiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlzRm9ybVZhbGlkIiwiY2hlY2tWYWxpZGl0eSIsInRvZ2dsZSIsImJ1dHRvbkluYWN0aXZlIiwiZGlzYWJsZWQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiaW1nVXJsIiwiaW1nTmFtZSIsIl9pbWdVcmwiLCJfaW1nTmFtZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2J1dHRvblNhdmUiLCJfdGV4dFNhdmVCdXR0b24iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsImZvcm1WYWx1ZXMiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1JbnB1dHMiLCJyZXNldCIsImlzTG9hZGluZyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVzIiwiaXRlbSIsIlVzZXJJbmZvIiwibmFtZVVzZXJTZWxlY3RvciIsIndvcmtVc2VyU2VsZWN0b3IiLCJhdmF0YXJVc2VyU2VsZWN0b3IiLCJfbmFtZVVzZXIiLCJfd29ya1VzZXIiLCJfYXZhdGFyIiwibmFtZVVzZXIiLCJ3b3JrVXNlciIsInVzZXJEYXRhIiwiYXZhdGFyIiwiZXJyb3IiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiQXBpIiwib3B0aW9ucyIsIl91cmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiZGF0YSIsImNhcmRJZCIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiUG9wdXBXaXRoQ29uZmlybSIsIl9idXR0b25Db25maXJtRGVsZXRlQ2FyZCIsIl9mdW5jdGlvbkRlbGV0ZUNhcmQiLCJmdW5jdGlvbkRlbGV0ZUNhcmQiLCJzZXR0aW5ncyIsInBvcHVwRm9ybSIsImZvcm1Qb3B1cEFkZENhcmQiLCJwb3B1cEVkaXQiLCJmb3JtUG9wdXBFZGl0Iiwib3BlblBvcHVwQWRkQ2FyZEJ1dHRvbiIsIm9wZW5Qb3B1cEVkaXRQcm9maWxlQnV0dG9uIiwibmFtZVVzZXJJbnB1dCIsIndvcmtVc2VySW5wdXQiLCJidXR0b25FZGl0QXZhdGFyIiwiZm9ybVBvcHVwQXZhdGFyIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImNyZWF0ZUNhcmQiLCJjYXJkIiwibGVuZ3RoIiwiaW1nUG9wdXAiLCJvcGVuIiwiaXNMaWtlZCIsImRlbGV0ZUxpa2VDYXJkIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwibGlrZUNhcmQiLCJwb3B1cERlbGV0ZUNhcmQiLCJkZWxldGVDYXJkIiwiX2RlbGV0ZUNhcmQiLCJjYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsImlzTGlrZWRCeU1lIiwidXNlckluZm8iLCJjYXJkTGlzdCIsIm93bmVyIiwiYWRkSXRlbSIsImdldFVzZXJJbmZvQW5kSW5pdGlhbENhcmRzIiwiY2FyZHMiLCJ1c2VyIiwiY29ob3J0Iiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwicmVuZGVySXRlbXMiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwV2l0aEFkZENhcmRGb3JtIiwibG9hZGluZyIsImFkZENhcmQiLCJmaW5hbGx5IiwidmFsaWRhdG9yQ2FyZEZvcm0iLCJyZXNldFZhbGlkYXRpb24iLCJwb3B1cEVkaXRQcm9maWxlRm9ybSIsInNhdmVVc2VySW5mbyIsInZhbGlkYXRvclByb2ZpbGVGb3JtIiwicG9wdXBFZGl0QXZhdGFyIiwiZm9ybVZhbHVlIiwiZWRpdEF2YXRhciIsInZhbGlkYXRvckF2YXRhckZvcm0iLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==