(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i,a,u,c,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._link=n,this._likes=r,this._cardSelector=o,this._handleCardClick=i,this._popupDeleteCard=a,this._ownerId=u,this._cardId=c,this._api=l}var n,r;return n=t,r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(e){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".element__image"),this._like=this._element.querySelector(".button_variant_like"),this._delete=this._element.querySelector(".button_variant_delete"),this._ownerId!==e&&this._delete.remove(),this._setEventListeners(),this._element.querySelector(".element__town").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._likeCount=this._element.querySelector(".element__like-count"),this._likeCount.textContent=this._likes,this._element}},{key:"_deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_likeCard",value:function(){this._like.classList.add("button_variant_active-like")}},{key:"_deleteLikeCard",value:function(){this._like.classList.remove("button_variant_active-like")}},{key:"_setEventListeners",value:function(){var e=this;this._like.addEventListener("click",(function(){e._like.classList.contains("button_variant_active-like")?e._api.deleteLikeCard(e._cardId).then((function(){e._deleteLikeCard();var t=Number(e._likeCount.textContent);e._likeCount.textContent=t-1})).catch((function(e){return console.log(e)})):e._api.likeCard(e._cardId).then((function(){e._likeCard();var t=Number(e._likeCount.textContent);e._likeCount.textContent=t+1})).catch((function(e){return console.log(e)}))})),this._delete.addEventListener("click",(function(){e._popupDeleteCard.open((function(){e._api.deleteCard(e._cardId).then((function(){e._deleteCard()})).catch((function(e){return console.log(e)}))}))})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}}],r&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validationSettings=t,this._formElement=n,this._buttonElement=this._formElement.querySelector(this._validationSettings.popupSubmit),this._inputList=Array.from(this._formElement.querySelectorAll("".concat(this._validationSettings.popupInput)))}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this;this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._validationSettings.inputError),t.classList.add(this._validationSettings.inputErrorActive),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._validationSettings.inputError),t.classList.remove(this._validationSettings.inputErrorActive),t.textContent=""}},{key:"_toggleButtonState",value:function(){var e=this._formElement.checkValidity();this._buttonElement.classList.toggle(this._validationSettings.buttonInactive,!e),this._buttonElement.disabled=!e}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()})),this._popup.querySelector(".popup__close-button").addEventListener("click",this.close.bind(this))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=l(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},c.apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function f(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e))._imgUrl=t,r._imgName=n,r}return t=a,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;this._imgUrl.src=t,this._imgUrl.alt=n,this._imgName.textContent=n,c(p(a.prototype),"open",this).call(this)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._buttonSave=n._popup.querySelector(".popup__save-button"),n._textSaveButton=n._buttonSave.textContent,n._handleFormSubmit=t,n._inputList=Array.from(n._popup.querySelectorAll(".popup__input")),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())})),y(k(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){var e=this._popup.querySelector(".popup__form");y(k(a.prototype),"close",this).call(this),e.reset()}},{key:"loading",value:function(e){this._buttonSave.textContent=e?"Сохранение...":this._textSaveButton}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._initialArray.forEach((function(t){e._renderer(t)}))}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t){var n=t.nameUserSelector,r=t.workUserSelector,o=t.avatarUserSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameUser=document.querySelector(n),this._workUser=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{nameUser:this._nameUser.textContent,workUser:this._workUser.textContent}}},{key:"setUserInfo",value:function(e){this._nameUser.textContent=e.nameUser,this._workUser.textContent=e.workUser}},{key:"setUserAvatar",value:function(e){this._avatar.src=e.avatar}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))},L=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return fetch(this._url+"/users/me",{method:"GET",headers:this._headers}).then(j)}},{key:"getInitialCards",value:function(){return fetch(this._url+"/cards",{method:"GET",headers:this._headers}).then(j)}},{key:"saveUserInfo",value:function(e){return fetch(this._url+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.nameUser,about:e.workUser})}).then(j)}},{key:"addCard",value:function(e){return fetch(this._url+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(j)}},{key:"deleteCard",value:function(e){return fetch(this._url+"/cards/".concat(e),{method:"DELETE",headers:this._headers}).then(j)}},{key:"likeCard",value:function(e){return fetch(this._url+"/cards/".concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(j)}},{key:"deleteLikeCard",value:function(e){return fetch(this._url+"/cards/".concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(j)}},{key:"editAvatar",value:function(e){return fetch(this._url+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(j)}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=q(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},U.apply(this,arguments)}function q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}function R(e,t){return R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},R(e,t)}function T(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var D,A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._buttonConfirmDeleteCard=t._popup.querySelector(".popup__save-button"),t._functionDeleteCard=null,t}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;U(x(a.prototype),"setEventListeners",this).call(this),this._buttonConfirmDeleteCard.addEventListener("click",(function(){e._functionDeleteCard(),e.close()}))}},{key:"open",value:function(e){U(x(a.prototype),"open",this).call(this),this._functionDeleteCard=e}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i),V={inputError:"popup__input_type_error",inputErrorActive:"popup__input-error_active",buttonInactive:"button_variant_inactive",popupInput:".popup__input",popupSubmit:".popup__submit",popupForm:".popup__form"},B=document.querySelector(".popup_add").querySelector(".popup__form"),N=document.querySelector(".popup_edit"),F=N.querySelector(".popup__form"),J=document.querySelector(".button_variant_add"),G=document.querySelector(".button_variant_edit"),H=".elements",z=N.querySelector(".popup__input_name-user"),M=N.querySelector(".popup__input_work-user"),K=document.querySelector(".popup__img"),Q=document.querySelector(".popup__img-info"),W=document.querySelector(".button_variant_avatar"),X=document.querySelector(".popup_edit-avatar").querySelector(".popup__form"),Y=new L({url:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"d88185d7-a57f-426c-977a-fbfd58d99413","Content-Type":"application/json"}}),Z=new C({nameUserSelector:".profile__title",workUserSelector:".profile__subtitle",avatarUserSelector:".profile__avatar"});Y.getUserInfo().then((function(e){var t={nameUser:e.name,workUser:e.about,avatar:e.avatar,_id:e._id,cohort:e.cohort};Z.setUserInfo(t),D=e._id,Z.setUserAvatar(t)})).catch((function(e){return console.log(e)})),Y.getInitialCards().then((function(e){var t=new E({items:e,renderer:function(e){var n=ee(e.name,e.link,e.likes.length,e.owner._id,e._id);t.addItem(n)}},H);t.renderItems()})).catch((function(e){return console.log(e)}));var $=new h(".popup_view-card",K,Q);function ee(e,n,r,o,i){return new t(e,n,r,"#template",(function(){return $.open({name:e,link:n})}),ne,o,i,Y).generateCard(D)}$.setEventListeners();var te=new g(".popup_add",(function(e){te.loading(!0),Y.addCard(e).then((function(e){var t=ee(e.name,e.link,e.likes.length,e.owner._id,e._id),n=new E({items:t,renderer:function(e){var t=ee(e.name,e.link,e.likes.length,e.owner._id,e._id);n.addItem(t)}},H);n.addItem(t),te.close()})).catch((function(e){return console.log(e)})).finally((function(){te.loading(!1)}))}));te.setEventListeners(),J.addEventListener("click",(function(){ie.resetValidation(),te.open()}));var ne=new A(".popup_delete-card");ne.setEventListeners();var re=new g(".popup_edit",(function(e){Z.setUserInfo(e),re.loading(!0),Y.saveUserInfo(e).then((function(){re.close()})).catch((function(e){return console.log(e)})).finally((function(){re.loading(!1)}))}));re.setEventListeners(),G.addEventListener("click",(function(){var e=Z.getUserInfo();z.value=e.nameUser,M.value=e.workUser,ae.resetValidation(),re.open()}));var oe=new g(".popup_edit-avatar",(function(e){oe.loading(!0),Y.editAvatar(e).then((function(){Z.setUserAvatar(e),oe.close()})).catch((function(e){return console.log(e)})).finally((function(){oe.loading(!1)}))}));oe.setEventListeners(),W.addEventListener("click",(function(){ue.resetValidation(),oe.open()}));var ie=new r(V,B),ae=new r(V,F),ue=new r(V,X);ae.enableValidation(),ie.enableValidation(),ue.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVNJLFlBQVlwRSxHQUNyQndGLEdBQXFCTixTQUFRLEdBQzdCbkwsRUFBSTBMLGFBQWF6RixHQUNkakUsTUFBSyxXQUNKeUosR0FBcUJyRyxXQUV0QmhELE9BQU0sU0FBQUMsR0FBRyxPQUFJQyxRQUFRQyxJQUFJRixNQUN6QmlKLFNBQVEsV0FDUEcsR0FBcUJOLFNBQVEsU0FJbkNNLEdBQXFCUixvQkFFckJ2QixFQUEyQjdILGlCQUFpQixTQUFTLFdBQ25ELElBQU02RixFQUFXdUMsRUFBU0MsY0FDMUJOLEVBQWMxRCxNQUFRd0IsRUFBU0YsU0FDL0JxQyxFQUFjM0QsTUFBUXdCLEVBQVNELFNBQy9Ca0UsR0FBcUJILGtCQUNyQkMsR0FBcUIvSSxVQUl2QixJQUFNa0osR0FBa0IsSUFBSWhHLEVFekZJLHNCRnlGbUMsU0FBQ2lHLEdBQ2xFRCxHQUFnQlQsU0FBUSxHQUN4Qm5MLEVBQUk4TCxXQUFXRCxHQUNaN0osTUFBSyxXQUNKaUksRUFBU0ssY0FBY3VCLEdBQ3ZCRCxHQUFnQnhHLFdBRWpCaEQsT0FBTSxTQUFBQyxHQUFHLE9BQUlDLFFBQVFDLElBQUlGLE1BQ3pCaUosU0FBUSxXQUNQTSxHQUFnQlQsU0FBUSxTQUk5QlMsR0FBZ0JYLG9CQUVoQm5CLEVBQWlCakksaUJBQWlCLFNBQVMsV0FDekNrSyxHQUFvQlAsa0JBQ3BCSSxHQUFnQmxKLFVBSWxCLElBQU02SSxHQUFvQixJQUFJMUksRUFBY3VHLEVBQVVFLEdBQ2hEcUMsR0FBdUIsSUFBSTlJLEVBQWN1RyxFQUFVSSxHQUNuRHVDLEdBQXNCLElBQUlsSixFQUFjdUcsRUFBVVcsR0FFeEQ0QixHQUFxQkssbUJBQ3JCVCxHQUFrQlMsbUJBQ2xCRCxHQUFvQkMsb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IobmFtZSwgbGluaywgbGlrZXMsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBwb3B1cERlbGV0ZUNhcmQsIG93bmVySWQsIGNhcmRJZCwgYXBpKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX3BvcHVwRGVsZXRlQ2FyZCA9IHBvcHVwRGVsZXRlQ2FyZDtcbiAgICB0aGlzLl9vd25lcklkID0gb3duZXJJZDtcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkSWQ7XG4gICAgdGhpcy5fYXBpID0gYXBpO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCh1c2VySWQpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuICAgIHRoaXMuX2xpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fdmFyaWFudF9saWtlJyk7XG4gICAgdGhpcy5fZGVsZXRlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3ZhcmlhbnRfZGVsZXRlJyk7XG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHVzZXJJZCkge1xuICAgICAgdGhpcy5fZGVsZXRlLnJlbW92ZSgpO1xuICAgIH1cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdG93bicpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX2xpa2VDb3VudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtY291bnQnKTtcbiAgICB0aGlzLl9saWtlQ291bnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcztcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgX2RlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9saWtlQ2FyZCgpIHtcbiAgICB0aGlzLl9saWtlLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbl92YXJpYW50X2FjdGl2ZS1saWtlJyk7XG4gIH1cblxuICBfZGVsZXRlTGlrZUNhcmQoKSB7XG4gICAgdGhpcy5fbGlrZS5jbGFzc0xpc3QucmVtb3ZlKCdidXR0b25fdmFyaWFudF9hY3RpdmUtbGlrZScpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAoISh0aGlzLl9saWtlLmNsYXNzTGlzdC5jb250YWlucygnYnV0dG9uX3ZhcmlhbnRfYWN0aXZlLWxpa2UnKSkpIHtcbiAgICAgICAgdGhpcy5fYXBpLmxpa2VDYXJkKHRoaXMuX2NhcmRJZClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9saWtlQ2FyZCgpO1xuICAgICAgICAgICAgbGV0IG51bUxpa2VDb3VudCA9IE51bWJlcih0aGlzLl9saWtlQ291bnQudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgdGhpcy5fbGlrZUNvdW50LnRleHRDb250ZW50ID0gbnVtTGlrZUNvdW50ICsgMTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9hcGkuZGVsZXRlTGlrZUNhcmQodGhpcy5fY2FyZElkKVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2RlbGV0ZUxpa2VDYXJkKCk7XG4gICAgICAgICAgICBsZXQgbnVtTGlrZUNvdW50ID0gTnVtYmVyKHRoaXMuX2xpa2VDb3VudC50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICB0aGlzLl9saWtlQ291bnQudGV4dENvbnRlbnQgPSBudW1MaWtlQ291bnQgLSAxO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuX2RlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX3BvcHVwRGVsZXRlQ2FyZC5vcGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5fYXBpLmRlbGV0ZUNhcmQodGhpcy5fY2FyZElkKVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2RlbGV0ZUNhcmQoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvblNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncyA9IHZhbGlkYXRpb25TZXR0aW5ncztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5wb3B1cFN1Ym1pdCk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGAke3RoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5wb3B1cElucHV0fWApKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KVxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRFcnJvcik7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmlucHV0RXJyb3JBY3RpdmUpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmlucHV0RXJyb3IpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5pbnB1dEVycm9yQWN0aXZlKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBjb25zdCBpc0Zvcm1WYWxpZCA9IHRoaXMuX2Zvcm1FbGVtZW50LmNoZWNrVmFsaWRpdHkoKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC50b2dnbGUodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmJ1dHRvbkluYWN0aXZlLCAhaXNGb3JtVmFsaWQpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSAhaXNGb3JtVmFsaWQ7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuX3BvcHVwXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG4gIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGltZ1VybCwgaW1nTmFtZSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltZ1VybCA9IGltZ1VybDtcbiAgICB0aGlzLl9pbWdOYW1lID0gaW1nTmFtZTtcbiAgfVxuXG4gIG9wZW4oe2xpbmssIG5hbWV9KSB7XG4gICAgdGhpcy5faW1nVXJsLnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1nVXJsLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5faW1nTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG5cbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uU2F2ZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idXR0b24nKTtcbiAgICB0aGlzLl90ZXh0U2F2ZUJ1dHRvbiA9IHRoaXMuX2J1dHRvblNhdmUudGV4dENvbnRlbnQ7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBmb3JtVmFsdWVzW2lucHV0RWxlbWVudC5uYW1lXSA9IGlucHV0RWxlbWVudC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgY29uc3QgZm9ybUlucHV0cyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgZm9ybUlucHV0cy5yZXNldCgpO1xuICB9XG5cbiAgbG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9idXR0b25TYXZlLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25TYXZlLnRleHRDb250ZW50ID0gdGhpcy5fdGV4dFNhdmVCdXR0b247XG4gICAgfVxuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtpdGVtcywgcmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2luaXRpYWxBcnJheSA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2luaXRpYWxBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKVxuICAgIH0pXG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHtuYW1lVXNlclNlbGVjdG9yLCB3b3JrVXNlclNlbGVjdG9yLCBhdmF0YXJVc2VyU2VsZWN0b3J9KSB7XG4gICAgdGhpcy5fbmFtZVVzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVVc2VyU2VsZWN0b3IpO1xuICAgIHRoaXMuX3dvcmtVc2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih3b3JrVXNlclNlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclVzZXJTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCBpbmZvID0ge1xuICAgICAgbmFtZVVzZXI6IHRoaXMuX25hbWVVc2VyLnRleHRDb250ZW50LFxuICAgICAgd29ya1VzZXI6IHRoaXMuX3dvcmtVc2VyLnRleHRDb250ZW50LFxuICAgIH07XG4gICAgcmV0dXJuIGluZm87XG4gIH1cblxuICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xuICAgIHRoaXMuX25hbWVVc2VyLnRleHRDb250ZW50ID0gdXNlckRhdGEubmFtZVVzZXI7XG4gICAgdGhpcy5fd29ya1VzZXIudGV4dENvbnRlbnQgPSB1c2VyRGF0YS53b3JrVXNlcjtcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIodXNlckRhdGEpIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gdXNlckRhdGEuYXZhdGFyO1xuICB9XG59IiwiY29uc3QgZXJyb3IgPSByZXMgPT4ge1xuICBpZiAocmVzLm9rKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gIH1cbiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX3VybCA9IG9wdGlvbnMudXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGVycm9yKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgJy9jYXJkcycsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGVycm9yKTtcbiAgfVxuXG4gIHNhdmVVc2VySW5mbyh1c2VyRGF0YSkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyAnL3VzZXJzL21lJywge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZVVzZXIsXG4gICAgICAgIGFib3V0OiB1c2VyRGF0YS53b3JrVXNlclxuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4oZXJyb3IpO1xuICB9XG5cbiAgYWRkQ2FyZChkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArICcvY2FyZHMnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgIH0pXG4gICAgICAudGhlbihlcnJvcik7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyBgL2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGVycm9yKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyBgL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGVycm9yKTtcbiAgfVxuXG4gIGRlbGV0ZUxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyBgL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGVycm9yKTtcbiAgfVxuXG4gIGVkaXRBdmF0YXIodXNlckRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgJy91c2Vycy9tZS9hdmF0YXInLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IHVzZXJEYXRhLmF2YXRhclxuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4oZXJyb3IpO1xuICB9XG5cbiAgLy8gZ2V0VXNlckluZm9BbmRJbml0aWFsQ2FyZHMoKSB7XG4gIC8vICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKVxuICAvLyB9XG59OyIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcbmltcG9ydCB7c2V0dGluZ3MsIGZvcm1Qb3B1cEFkZENhcmQsIG9wZW5Qb3B1cEFkZENhcmRCdXR0b24sIGVsZW1lbnRzLCBmb3JtUG9wdXBFZGl0LCBvcGVuUG9wdXBFZGl0UHJvZmlsZUJ1dHRvbiwgbmFtZVVzZXJJbnB1dCwgd29ya1VzZXJJbnB1dCxcbiAgc2VsZWN0b3JQb3B1cFZpZXdDYXJkLCBzZWxlY3RvclBvcHVwQWRkQ2FyZCwgc2VsZWN0b3JQb3B1cEVkaXRQcm9maWxlLCBpbWdVcmwsIGltZ05hbWUsIHNlbGVjdG9yUG9wdXBEZWxldGVDYXJkLCBidXR0b25FZGl0QXZhdGFyLFxuICBzZWxlY3RvclBvcHVwRWRpdEF2YXRhciwgZm9ybVBvcHVwQXZhdGFyfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmxldCB1c2VySWQ7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICB1cmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQxJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICdkODgxODVkNy1hNTdmLTQyNmMtOTc3YS1mYmZkNThkOTk0MTMnLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gIH1cbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT0g0L/QvtC70YPRh9Cw0LXQvCDRgSDRgdC10YDQstC10YDQsCDQtNCw0L3QvdGL0LUg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INC4INC00L7QsdCw0LLQu9GP0LXQvCDQuNGFINC90LAg0YHQsNC50YIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVVzZXJTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgd29ya1VzZXJTZWxlY3RvcjogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcbiAgYXZhdGFyVXNlclNlbGVjdG9yOiBcIi5wcm9maWxlX19hdmF0YXJcIlxufSk7XG5cbmFwaS5nZXRVc2VySW5mbygpXG4gIC50aGVuKChyZXMpID0+IHtcbiAgICBjb25zdCB1c2VyRGF0YSA9IHtcbiAgICAgIG5hbWVVc2VyOiByZXMubmFtZSxcbiAgICAgIHdvcmtVc2VyOiByZXMuYWJvdXQsXG4gICAgICBhdmF0YXI6IHJlcy5hdmF0YXIsXG4gICAgICBfaWQ6IHJlcy5faWQsXG4gICAgICBjb2hvcnQ6IHJlcy5jb2hvcnRcbiAgICB9XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgIHVzZXJJZCA9IHJlcy5faWQ7XG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YSk7XG4gIH0pXG4gIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT0g0L/QvtC70YPRh9Cw0LXQvCDQutCw0YDRgtC+0YfQutC4INGBINGB0LXRgNCy0LXRgNCwINC4INC00L7QsdCw0LLQu9GP0LXQvCDQvdCwINGB0YLRgCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuYXBpLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChyZXMpID0+IHtcbiAgICBjb25zdCBpbml0aWFsQ2FyZHMgPSByZXM7XG4gICAgY29uc3QgZGVmYXVsdENhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICAgICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtLm5hbWUsIGl0ZW0ubGluaywgaXRlbS5saWtlcy5sZW5ndGgsIGl0ZW0ub3duZXIuX2lkLCBpdGVtLl9pZCk7XG4gICAgICAgIGRlZmF1bHRDYXJkTGlzdC5hZGRJdGVtKGNhcmQpO1xuICAgICAgfVxuICAgIH0sIGVsZW1lbnRzKTtcbiAgICBkZWZhdWx0Q2FyZExpc3QucmVuZGVySXRlbXMoKTtcbiAgfSlcbiAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcblxuY29uc3QgaW1nUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoc2VsZWN0b3JQb3B1cFZpZXdDYXJkLCBpbWdVcmwsIGltZ05hbWUpO1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKG5hbWUsIGxpbmssIGxpa2VzLCBvd25lcklkLCBjYXJkSWQpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKG5hbWUsIGxpbmssIGxpa2VzLCAnI3RlbXBsYXRlJywgKCkgPT4gaW1nUG9wdXAub3Blbih7bmFtZSwgbGlua30pLFxuICAgIHBvcHVwRGVsZXRlQ2FyZCwgb3duZXJJZCwgY2FyZElkLCBhcGkpO1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKHVzZXJJZCk7XG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09INC+0YLQutGA0YvRgtC40LUg0Lgg0LfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0YEg0LrQsNGA0YLQvtGH0LrQvtC5ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5pbWdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT0g0YHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQtdC6INC40Lcg0LzQsNGB0YHQuNCy0LAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIGNvbnN0IGRlZmF1bHRDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbi8vICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbi8vICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4vLyAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoaXRlbS5uYW1lLCBpdGVtLmxpbmspO1xuLy8gICAgIGRlZmF1bHRDYXJkTGlzdC5hZGRJdGVtKGNhcmQpO1xuLy8gICB9XG4vLyB9LCBlbGVtZW50cyk7XG4vL1xuLy8gZGVmYXVsdENhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PSBwb3B1cCBhZGQgY2FyZCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY29uc3QgcG9wdXBXaXRoQWRkQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvclBvcHVwQWRkQ2FyZCwgKGZvcm1WYWx1ZXMpID0+IHtcbiAgcG9wdXBXaXRoQWRkQ2FyZEZvcm0ubG9hZGluZyh0cnVlKTtcbiAgYXBpLmFkZENhcmQoZm9ybVZhbHVlcylcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChyZXMubmFtZSwgcmVzLmxpbmssIHJlcy5saWtlcy5sZW5ndGgsIHJlcy5vd25lci5faWQsIHJlcy5faWQpO1xuICAgICAgY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gICAgICAgIGl0ZW1zOiBjYXJkLFxuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtLm5hbWUsIGl0ZW0ubGluaywgaXRlbS5saWtlcy5sZW5ndGgsIGl0ZW0ub3duZXIuX2lkLCBpdGVtLl9pZCk7XG4gICAgICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkKTtcbiAgICAgICAgfVxuICAgICAgfSwgZWxlbWVudHMpO1xuICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkKTtcbiAgICAgIHBvcHVwV2l0aEFkZENhcmRGb3JtLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBXaXRoQWRkQ2FyZEZvcm0ubG9hZGluZyhmYWxzZSk7XG4gIH0pO1xufSk7XG5cbnBvcHVwV2l0aEFkZENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbm9wZW5Qb3B1cEFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIHZhbGlkYXRvckNhcmRGb3JtLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3B1cFdpdGhBZGRDYXJkRm9ybS5vcGVuKCk7XG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT0gcG9wdXAgZGVsZXRlIGNhcmQgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNvbnN0IHBvcHVwRGVsZXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhDb25maXJtKHNlbGVjdG9yUG9wdXBEZWxldGVDYXJkKTtcbnBvcHVwRGVsZXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PSBwb3B1cCBlZGl0IHByb2ZpbGUgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JQb3B1cEVkaXRQcm9maWxlLCAoZm9ybVZhbHVlcykgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhmb3JtVmFsdWVzKTtcbiAgcG9wdXBFZGl0UHJvZmlsZUZvcm0ubG9hZGluZyh0cnVlKTtcbiAgYXBpLnNhdmVVc2VySW5mbyhmb3JtVmFsdWVzKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHBvcHVwRWRpdFByb2ZpbGVGb3JtLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBFZGl0UHJvZmlsZUZvcm0ubG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59KTtcblxucG9wdXBFZGl0UHJvZmlsZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxub3BlblBvcHVwRWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZVVzZXJJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWVVc2VyO1xuICB3b3JrVXNlcklucHV0LnZhbHVlID0gdXNlckRhdGEud29ya1VzZXI7XG4gIHZhbGlkYXRvclByb2ZpbGVGb3JtLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3B1cEVkaXRQcm9maWxlRm9ybS5vcGVuKCk7XG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT0gcG9wdXAgZWRpdCBwcm9maWxlIGF2YXRhciA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY29uc3QgcG9wdXBFZGl0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JQb3B1cEVkaXRBdmF0YXIsIChmb3JtVmFsdWUpID0+IHtcbiAgcG9wdXBFZGl0QXZhdGFyLmxvYWRpbmcodHJ1ZSk7XG4gIGFwaS5lZGl0QXZhdGFyKGZvcm1WYWx1ZSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKGZvcm1WYWx1ZSk7XG4gICAgICBwb3B1cEVkaXRBdmF0YXIuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cEVkaXRBdmF0YXIubG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59KTtcblxucG9wdXBFZGl0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmJ1dHRvbkVkaXRBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIHZhbGlkYXRvckF2YXRhckZvcm0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHBvcHVwRWRpdEF2YXRhci5vcGVuKCk7XG59KVxuXG4vLyA9PT09PT09PT09PT09PT0g0Y3QutC30LXQvNC/0LvRj9GA0Ysg0LrQu9Cw0YHRgdCwIEZvcm1WYWxpZGF0b3Ig0Lgg0LLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8ID09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY29uc3QgdmFsaWRhdG9yQ2FyZEZvcm0gPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybVBvcHVwQWRkQ2FyZCk7XG5jb25zdCB2YWxpZGF0b3JQcm9maWxlRm9ybSA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtUG9wdXBFZGl0KTtcbmNvbnN0IHZhbGlkYXRvckF2YXRhckZvcm0gPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybVBvcHVwQXZhdGFyKTtcblxudmFsaWRhdG9yUHJvZmlsZUZvcm0uZW5hYmxlVmFsaWRhdGlvbigpO1xudmFsaWRhdG9yQ2FyZEZvcm0uZW5hYmxlVmFsaWRhdGlvbigpO1xudmFsaWRhdG9yQXZhdGFyRm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uQ29uZmlybURlbGV0ZUNhcmQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnV0dG9uJyk7XG4gICAgdGhpcy5fZnVuY3Rpb25EZWxldGVDYXJkID0gbnVsbDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fYnV0dG9uQ29uZmlybURlbGV0ZUNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9mdW5jdGlvbkRlbGV0ZUNhcmQoKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9wZW4oZnVuY3Rpb25EZWxldGVDYXJkKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX2Z1bmN0aW9uRGVsZXRlQ2FyZCA9IGZ1bmN0aW9uRGVsZXRlQ2FyZDtcblxuICB9XG59IiwiLy8gY29uc3QgaW5pdGlhbENhcmRzID0gW1xuLy8gICB7XG4vLyAgICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxuLy8gICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbi8vICAgfSxcbi8vICAge1xuLy8gICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbi8vICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4vLyAgIH0sXG4vLyAgIHtcbi8vICAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxuLy8gICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4vLyAgIH0sXG4vLyAgIHtcbi8vICAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXG4vLyAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuLy8gICB9LFxuLy8gICB7XG4vLyAgICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9Jyxcbi8vICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4vLyAgIH0sXG4vLyAgIHtcbi8vICAgICBuYW1lOiAn0JHQsNC50LrQsNC7Jyxcbi8vICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4vLyAgIH1cbi8vIF07XG5cbmNvbnN0IHNldHRpbmdzID0ge1xuICBpbnB1dEVycm9yOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICBpbnB1dEVycm9yQWN0aXZlOiAncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZScsXG4gIGJ1dHRvbkluYWN0aXZlOiAnYnV0dG9uX3ZhcmlhbnRfaW5hY3RpdmUnLFxuICBwb3B1cElucHV0OiAnLnBvcHVwX19pbnB1dCcsXG4gIHBvcHVwU3VibWl0OiAnLnBvcHVwX19zdWJtaXQnLFxuICBwb3B1cEZvcm06ICcucG9wdXBfX2Zvcm0nXG59XG5cbmNvbnN0IHNlbGVjdG9yUG9wdXBWaWV3Q2FyZCA9IFwiLnBvcHVwX3ZpZXctY2FyZFwiO1xuY29uc3QgcG9wdXBBZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2FkZCcpO1xuY29uc3QgZm9ybVBvcHVwQWRkQ2FyZCA9IHBvcHVwQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbmNvbnN0IHNlbGVjdG9yUG9wdXBBZGRDYXJkID0gXCIucG9wdXBfYWRkXCI7XG5jb25zdCBwb3B1cEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX2VkaXRcIik7XG5jb25zdCBmb3JtUG9wdXBFZGl0ID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuY29uc3Qgc2VsZWN0b3JQb3B1cEVkaXRQcm9maWxlID0gXCIucG9wdXBfZWRpdFwiO1xuY29uc3Qgb3BlblBvcHVwQWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3ZhcmlhbnRfYWRkXCIpO1xuY29uc3Qgb3BlblBvcHVwRWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl92YXJpYW50X2VkaXRcIik7XG5jb25zdCBlbGVtZW50cyA9IFwiLmVsZW1lbnRzXCI7XG5jb25zdCBuYW1lVXNlcklucHV0ID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X25hbWUtdXNlclwiKTtcbmNvbnN0IHdvcmtVc2VySW5wdXQgPSBwb3B1cEVkaXQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfd29yay11c2VyXCIpO1xuY29uc3QgaW1nVXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWcnKTtcbmNvbnN0IGltZ05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltZy1pbmZvJyk7XG5jb25zdCBzZWxlY3RvclBvcHVwRGVsZXRlQ2FyZCA9IFwiLnBvcHVwX2RlbGV0ZS1jYXJkXCI7XG5jb25zdCBidXR0b25FZGl0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdmFyaWFudF9hdmF0YXJcIik7XG5jb25zdCBzZWxlY3RvclBvcHVwRWRpdEF2YXRhciA9IFwiLnBvcHVwX2VkaXQtYXZhdGFyXCI7XG5jb25zdCBwb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfZWRpdC1hdmF0YXJcIik7XG5jb25zdCBmb3JtUG9wdXBBdmF0YXIgPSBwb3B1cEF2YXRhci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuLy8gY29uc3QgY2xvc2VQb3B1cEFkZENhcmRCdXR0b24gPSBwb3B1cEFkZENhcmQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpO1xuLy8gY29uc3QgY2xvc2VQb3B1cEVkaXRQcm9maWxlQnV0dG9uID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKTtcbi8vIGNvbnN0IHBvcHVwSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWcnKTtcbi8vIGNvbnN0IHBvcHVwSW1nSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZy1pbmZvXCIpO1xuLy8gY29uc3QgcG9wdXBDbG9zZUJ1dHRvbiA9IHBvcHVwVmlld0NhcmQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcbi8vIGNvbnN0IG5vZGVFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XG4vLyBjb25zdCBwb3B1cEFkZEJ1dHRvbiA9IHBvcHVwQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnV0dG9uJyk7XG4vLyBjb25zdCBuYW1lVXNlckxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbi8vIGNvbnN0IHdvcmtVc2VyTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIpO1xuLy8gY29uc3Qgc2VsZWN0b3JOYW1lVXNlcklucHV0ID0gKFwiLnBvcHVwX19pbnB1dF9uYW1lLXVzZXJcIik7XG4vLyBjb25zdCBzZWxlY3RvcldvcmtVc2VySW5wdXQgPSAoXCIucG9wdXBfX2lucHV0X3dvcmstdXNlclwiKTtcbi8vIGNvbnN0IG5hbWVVc2VyTGFiZWxTZWxlY3RvciA9IChcIi5wcm9maWxlX190aXRsZVwiKTtcbi8vIGNvbnN0IHdvcmtVc2VyTGFiZWxTZWxlY3RvciA9IChcIi5wcm9maWxlX19zdWJ0aXRsZVwiKTtcbi8vIGNvbnN0IHBvcHVwVmlld0NhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3ZpZXctY2FyZFwiKTtcbmV4cG9ydCB7c2V0dGluZ3MsIGZvcm1Qb3B1cEFkZENhcmQsIG9wZW5Qb3B1cEFkZENhcmRCdXR0b24sIGVsZW1lbnRzLCBpbWdVcmwsIGltZ05hbWUsXG4gIGZvcm1Qb3B1cEVkaXQsIG9wZW5Qb3B1cEVkaXRQcm9maWxlQnV0dG9uLCBuYW1lVXNlcklucHV0LFxuICB3b3JrVXNlcklucHV0LCBzZWxlY3RvclBvcHVwVmlld0NhcmQsIHNlbGVjdG9yUG9wdXBBZGRDYXJkLCBzZWxlY3RvclBvcHVwRWRpdFByb2ZpbGUsIHNlbGVjdG9yUG9wdXBEZWxldGVDYXJkLFxuICBidXR0b25FZGl0QXZhdGFyLCBzZWxlY3RvclBvcHVwRWRpdEF2YXRhciwgZm9ybVBvcHVwQXZhdGFyfTsiXSwibmFtZXMiOlsiQ2FyZCIsIm5hbWUiLCJsaW5rIiwibGlrZXMiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJwb3B1cERlbGV0ZUNhcmQiLCJvd25lcklkIiwiY2FyZElkIiwiYXBpIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfbGlrZXMiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9wb3B1cERlbGV0ZUNhcmQiLCJfb3duZXJJZCIsIl9jYXJkSWQiLCJfYXBpIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsInVzZXJJZCIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2NhcmRJbWFnZSIsIl9saWtlIiwiX2RlbGV0ZSIsInJlbW92ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiX2xpa2VDb3VudCIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb250YWlucyIsImRlbGV0ZUxpa2VDYXJkIiwidGhlbiIsIl9kZWxldGVMaWtlQ2FyZCIsIm51bUxpa2VDb3VudCIsIk51bWJlciIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImxpa2VDYXJkIiwiX2xpa2VDYXJkIiwib3BlbiIsImRlbGV0ZUNhcmQiLCJfZGVsZXRlQ2FyZCIsIkZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl92YWxpZGF0aW9uU2V0dGluZ3MiLCJfZm9ybUVsZW1lbnQiLCJfYnV0dG9uRWxlbWVudCIsInBvcHVwU3VibWl0IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwb3B1cElucHV0IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3IiLCJpbnB1dEVycm9yQWN0aXZlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpc0Zvcm1WYWxpZCIsImNoZWNrVmFsaWRpdHkiLCJ0b2dnbGUiLCJidXR0b25JbmFjdGl2ZSIsImRpc2FibGVkIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsImltZ1VybCIsImltZ05hbWUiLCJfaW1nVXJsIiwiX2ltZ05hbWUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9idXR0b25TYXZlIiwiX3RleHRTYXZlQnV0dG9uIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJmb3JtVmFsdWVzIiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtSW5wdXRzIiwicmVzZXQiLCJpc0xvYWRpbmciLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2luaXRpYWxBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsIml0ZW0iLCJVc2VySW5mbyIsIm5hbWVVc2VyU2VsZWN0b3IiLCJ3b3JrVXNlclNlbGVjdG9yIiwiYXZhdGFyVXNlclNlbGVjdG9yIiwiX25hbWVVc2VyIiwiX3dvcmtVc2VyIiwiX2F2YXRhciIsIm5hbWVVc2VyIiwid29ya1VzZXIiLCJ1c2VyRGF0YSIsImF2YXRhciIsImVycm9yIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsIkFwaSIsIm9wdGlvbnMiLCJfdXJsIiwidXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiZGF0YSIsIlBvcHVwV2l0aENvbmZpcm0iLCJfYnV0dG9uQ29uZmlybURlbGV0ZUNhcmQiLCJfZnVuY3Rpb25EZWxldGVDYXJkIiwiZnVuY3Rpb25EZWxldGVDYXJkIiwic2V0dGluZ3MiLCJwb3B1cEZvcm0iLCJmb3JtUG9wdXBBZGRDYXJkIiwicG9wdXBFZGl0IiwiZm9ybVBvcHVwRWRpdCIsIm9wZW5Qb3B1cEFkZENhcmRCdXR0b24iLCJvcGVuUG9wdXBFZGl0UHJvZmlsZUJ1dHRvbiIsImVsZW1lbnRzIiwibmFtZVVzZXJJbnB1dCIsIndvcmtVc2VySW5wdXQiLCJidXR0b25FZGl0QXZhdGFyIiwiZm9ybVBvcHVwQXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJbmZvIiwiZ2V0VXNlckluZm8iLCJfaWQiLCJjb2hvcnQiLCJzZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJnZXRJbml0aWFsQ2FyZHMiLCJkZWZhdWx0Q2FyZExpc3QiLCJjYXJkIiwiY3JlYXRlQ2FyZCIsImxlbmd0aCIsIm93bmVyIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwiaW1nUG9wdXAiLCJnZW5lcmF0ZUNhcmQiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwV2l0aEFkZENhcmRGb3JtIiwibG9hZGluZyIsImFkZENhcmQiLCJjYXJkTGlzdCIsImZpbmFsbHkiLCJ2YWxpZGF0b3JDYXJkRm9ybSIsInJlc2V0VmFsaWRhdGlvbiIsInBvcHVwRWRpdFByb2ZpbGVGb3JtIiwic2F2ZVVzZXJJbmZvIiwidmFsaWRhdG9yUHJvZmlsZUZvcm0iLCJwb3B1cEVkaXRBdmF0YXIiLCJmb3JtVmFsdWUiLCJlZGl0QXZhdGFyIiwidmFsaWRhdG9yQXZhdGFyRm9ybSIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9